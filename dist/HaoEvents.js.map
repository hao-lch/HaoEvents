{"version":3,"file":"HaoEvents.js","sources":["../src/index.ts"],"sourcesContent":["type Handler = (...event: any[]) => void\r\ninterface Emitter {\r\n    events: Map<string | symbol, Array<Handler>>,\r\n    on(type: string | symbol, handler: Handler) : void,\r\n    off(type: string | symbol, handler?: Handler) : void,\r\n    emit(type: string | symbol, ...event: any[]) : void,\r\n    once(type: string | symbol, handler: Handler) : void,\r\n}\r\n\r\nexport default function haoEvents(): Emitter {\r\n    const eventsObj = new Map<string | symbol, Array<Handler>>()\r\n\r\n    return {\r\n        events: eventsObj,\r\n\r\n        on(type: string | symbol, handler: Handler) {\r\n            if(eventsObj.has(type)) {\r\n                const handlers = eventsObj.get(type)\r\n                handlers!.push(handler)\r\n            }else {\r\n                eventsObj.set(type, [handler])\r\n            }\r\n        },\r\n\r\n        off(type: string | symbol, handler?: Handler) {\r\n            if(handler) {\r\n                const handlers = eventsObj.get(type)\r\n                handlers?.splice(handlers.indexOf(handler), 1)\r\n            }else {\r\n                eventsObj.delete(type)\r\n            }\r\n        },\r\n\r\n        emit(type: string | symbol, ...event: any[]) {\r\n            const handlers = eventsObj.get(type)\r\n            handlers?.slice().forEach((handler, index) => {\r\n                handler(...event)\r\n            })\r\n        },\r\n\r\n        once(type: string | symbol, handler: Handler) {\r\n            const callback = (...args: any[]) => {\r\n                handler(...args)\r\n                this.off(type, callback)\r\n            }\r\n            this.on(type, callback)\r\n        }\r\n    }\r\n}"],"names":["eventsObj","Map","events","on","type","handler","has","get","push","set","off","handlers","splice","indexOf","delete","emit","event","slice","forEach","index","once","callback","args","this"],"mappings":"gPASc,WACV,MAAMA,EAAY,IAAIC,IAEtB,MAAO,CACHC,OAAQF,EAERG,GAAGC,EAAuBC,GACtB,GAAGL,EAAUM,IAAIF,GAAO,CACHJ,EAAUO,IAAIH,GACrBI,KAAKH,EAClB,MACGL,EAAUS,IAAIL,EAAM,CAACC,GAE5B,EAEDK,IAAIN,EAAuBC,GACvB,GAAGA,EAAS,CACR,MAAMM,EAAWX,EAAUO,IAAIH,GAC/BO,SAAAA,EAAUC,OAAOD,EAASE,QAAQR,GAAU,EAC/C,MACGL,EAAUc,OAAOV,EAExB,EAEDW,KAAKX,KAA0BY,GAC3B,MAAML,EAAWX,EAAUO,IAAIH,GAC/BO,SAAAA,EAAUM,QAAQC,SAAQ,CAACb,EAASc,KAChCd,KAAWW,EAAM,GAExB,EAEDI,KAAKhB,EAAuBC,GACxB,MAAMgB,EAAW,IAAIC,KACjBjB,KAAWiB,GACXC,KAAKb,IAAIN,EAAMiB,EAAS,EAE5BE,KAAKpB,GAAGC,EAAMiB,EACjB,EAET"}